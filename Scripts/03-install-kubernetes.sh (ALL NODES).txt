#!/bin/bash
set -e

echo "[INFO] Installing Kubernetes components..."

sudo apt install -y apt-transport-https ca-certificates curl

curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.29/deb/Release.key \
 | sudo tee /etc/apt/keyrings/kubernetes.asc

echo "deb [signed-by=/etc/apt/keyrings/kubernetes.asc] \
https://pkgs.k8s.io/core:/stable:/v1.29/deb/ /" \
 | sudo tee /etc/apt/sources.list.d/kubernetes.list

sudo apt update
sudo apt install -y kubelet kubeadm kubectl
sudo systemctl enable kubelet

echo "[SUCCESS] Kubernetes installed"
